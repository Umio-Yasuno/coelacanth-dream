---
title: "【雑記】AM5 環境に移行した"
date: 2025-03-22T22:42:10+09:00
draft: false
categories: [ "Diary", ]
# tags: [ "", ]
noindex: false
# summary: ""
# keywords: [ "", ]
# author: ""
---

ようやく AM5 環境に移行したため、その雑記。  

自分は 2021年12月に CPU を Ryzen 5 5600G、マザーボードを GIGABYTE A520M S2H に交換してから、dGPU 以外は特に換えずに使い続けていた。  
AM5 ソケットを採用する Ryzen 7000 シリーズが発表され、いつかは AM5 環境に移行するかなと思ってはいたが、Ryzen 8000G シリーズが発表され、Ryzen 9000 シリーズが発表されても、まだ移行する気にはなれなかった。  
その理由としては、AM5 環境はメモリ規格が DDR5 に変わる上、マザーボードが全体的に高価なため、移行に掛かるコストが高いことが挙げられる。  
それが今回移行を踏み切ったのには、コストを許容するだけの別の理由がいくつかある。  

## 移行理由
Zen 3 アーキテクチャは 2020年に登場した CPU アーキテクチャとはいえ、通常の用途では充分な性能を発揮してくれる、と思っている。  
だが Ryzen 5 5600G を 3年以上使い続けていて全く不満がない訳ではなかった。  

まず、コンパイル性能で見れば同じ 6コア 12スレッドでも Ryzen 5 5600G (Zen 3, L3 16MiB) と Ryzen 5 9600X (Zen 5, L3 32MiB) では大きな差があり、Phoronix によるレビューや OpenBenchmarking.org のデータを参考にすると、Linux Kernel のビルドでは 9600X は 5600G の半分以下の時間となっている。[^openbenchmarking-linux-kernel][^phoronix]  
また、ビルドにおいてはマルチスレッド性能が重要視されやすいが、最終的なリンクは並列化が難しいためシングルスレッド性能も重要となる。  
個人で AMD GPU 向けのモニタリングツールを開発しているが、5600G だとまさにリンク処理でそれなりに待たされる。  
結局のところ、CPU の性能は高ければ高いほど良いし、それだけ時間の節約にもなる。  

[^openbenchmarking-linux-kernel]: [Timed Linux Kernel Compilation Benchmark - OpenBenchmarking.org](https://openbenchmarking.org/test/pts/build-linux-kernel&eval=a94fc255324a86f95ba5207758d45b3e012d6e50)
[^phoronix]: [AMD Ryzen 5 9600X & Ryzen 7 9700X Offer Excellent Linux Performance Review - Phoronix](https://www.phoronix.com/review/ryzen-9600x-9700x)

次に、Ryzen 5 5600G は個人的に、発熱も消費電力も控えめで扱いやすい優秀な CPU (APU) だと考えているが、それがひっくり返って物足りないと感じるようになった。  
あくまでもハードウェア内部の SMU (System Management Unit) が報告する値ではあるが、5600G の場合、全スレッドに負荷を掛けるとソケット全体での消費電力が 48W に達したあたりで `EDC_CPU` スロットリングが発生するようになり、後は負荷が下がるまでその状態が続く。  
これが CPU 側の制限かマザーボード側の実装による制限かは確かめられていない。マザーボードがエントリー向けの A520 チップセットということもあり、UEFI で変更できる設定も少なかったからだ。  
それはともかくとして、5600G で高負荷な処理をする度、AM5 環境に移行すれば性能が大きく向上する上、発熱や消費電力においてもっと攻めた運用が可能になるということが段々と魅力的に思えてきた。  

## パーツ選定
AM5 環境に移行する上で Ryzen 5 7600X か Ryzen 5 8600G を最初は検討していたが、結局 Ryzen 5 9600X に決めた。Ryzen 7 を検討しなかったのは予算の都合。  
9600X は 7600X と 8600G と比較して、マルチスレッドとシングルスレッド共に明確に高く、何ならコンパイル系のベンチマークでは 8コアの 8700G とほとんど同じ性能を示している。  
まあそれが決め手という訳ではなく、どうせ今から組むなら新しい方が欲しいという理由のが大きい。  

ビルド性能、マルチスレッド性能を求めるならば Intel Core Ultra 200S シリーズが優秀な性能を示しているが[^phoronix-245k]、先に書いたツールの検証という目的もあるため選択肢には入らなかった。  

[^phoronix-245k]: [Intel Core Ultra 5 245K Linux Performance Review - Phoronix](https://www.phoronix.com/review/intel-core-ultra-5-245k-linux/2)

本音を言えば、Zen 5/5c + RDNA 3.5 + XDNA 2 な APU がデスクトップ向けに来てくれればモニタリングツールの検証用としても丁度良かったのだが、CES 2025 で特に発表は無かった。  
ただ、内蔵 GPU が強化されても自分はそれを活かすことはないだろうし、Ryzen 7000 シリーズから IoD 側に最低限の GPU が実装されているため、ツールの検証という点ではデスクトップ向け Ryzen 7000/9000 シリーズを選んでも問題ない。  

マザーボードは MicroATX で、最低限 USB Type-C インターフェイスと USB 3.2 Gen2 (10Gbps) が実装されているものが欲しいと考えていた。MicroATX に絞っているのはケースの最大対応サイズであるため。  
ちなみに今回は CPU とマザーボードとメモリを新規購入し、ケースや SSD、CPU クーラーは以前のものを使い回す、最低限のシステム移行となっている。  
移行前は GIGABYTE のマザーボードを使っていたため、AM5 環境でも GIGABYTE にしようと思っていた。
だが以前チェックしたときは、スペックや価格が自分にとって丁度良い物が見付からず、そういったことも環境移行を後回しにする理由になっていた。  
それが B850 チップセット採用製品が出てから再度チェックしたところ、GIGABYTE B850M DS3H を見付けた。  
B850M DS3H は GIGABYE Ultra Durable シリーズの製品で、筆者は見た目のシンプルさとコスパの良さが好きで AM4 環境でも Ultra Durable シリーズを愛用していた。  
PCIe Gen5 x16 スロット (CPU 側) 1基に加え、PCIe Gen3 x16 スロット (配線は x4、チップセット側) 1基が搭載され、また M.2 コネクタも 2基搭載されており、MicroATX の中では高い拡張性を持っている。  

メモリは Crucial Pro DDR5-6000 32GB Kit (2x 16GB) を購入した。  
AMD EXPO に対応し、5600MT/s 36-38-38-80 と 6000MT/s 36-38-38-80 での動作に対応しているメモリ。  
mclk:uclk が 1:1 で動作する DDR5-6000 に対応し[^ddr5-6000]、そして光らないのが良い。  

[^ddr5-6000]: [ASCII.jp：低発熱＆低消費電力でも性能が向上した「Ryzen 7 9700X」「Ryzen 5 9600X」のアプリ＆AI処理性能に驚いた (2/6)](https://ascii.jp/elem/000/004/214/4214559/2/)

## 組み立て
最後にパーツ交換したのが GPU であり、ケースからマザーボードを外し、そこから CPUクーラー、CPU を外し、また別のマザーボードに CPU と CPUクーラーを取り付け、ケースに留める……というのはかなり久しぶりだった。  
そのため若干の不安はあったが、特に問題が起きることもなく、無事に組み立てられた。  
私見ではあるが、電源を上に配置するタイプのケースは (電源がケースに固定されていない状態では) マザーボード上側の空間に余裕があり、組み立てと配線がやりやすい。最近はあまり見なくなったが。  
起動においても問題は起きず。DDR5 メモリは初回起動がメモリトレーニングで遅いと聞いていたが、それほど待たされること無く起動したため、逆に少し驚いた。  
DDR5 メモリを採用するシステムが普及し、UEFI 側の対応が進んだのだろうか。  

Ryzen 5 9600X はチップレット構成ということもあり、Ryzen 5 5600G よりも CPU温度が上がりやすい。  
CPUクーラーはサイズの大手裏剣参を使い回しているが、設定を変更していない状態では中程度の負荷ですぐに 60度を超える印象だ。  
とりあえず Eco Mode (65W) を有効にすると同時に Curve Optimizer を -30 に設定、それと温度リミットを 75度に設定した。  
一応この設定でも全スレッド高負荷状態で 5.2-5.3GHz を維持できている。SMU が報告する消費電力を見るに、温度リミットの前に電力リミットに達している状態であるため、夏場等では結果が変わると思われる。  
B850 のような非エントリー向けチップセットでは変更できる電力関連の設定が多く、自身の使い方に最適化しやすいのが嬉しい。  

移行前と移行後の性能については特に計測していない。  
CPU が 90W 以上を消費して 5GHz 超えで動作している光景を見ることができた時点で、今回移行した目的のほとんどは達成したと言える。  
それとしてビルド時の詰まる感じは確かに減っている。また CPU 性能の向上だけでなく、インターフェイス全体の高速化によりゲームのロードが快適になった。  
移行前のシステムでは、Radeon RX 6600 が PCIe Gen3 x8 に、主にゲーム用の外付け SSD が USB 5Gbps に制限されていたが、移行後では PCIe Gen4 x8、USB 10Gbps と制限が無くなった。  

今回は最低限のシステム以降であり GPU は Radeon RX 6600 8GB を使い続けているものの、今の所 Radeon RX 9060 シリーズ (存在自体は AMD 公式より発表済み) を購入予定でいる。  
筆者はゲームを基本 1080p でプレイしているが、プレイ体験の向上を目的として画質を極端に妥協することなく 100fps 以上を出したいと思うことが増えてきた。  
それと MHWilds をプレイ予定だったが、オープンベータテストとベンチマークの結果から RX 6600 では厳しいと感じたため諦めたことも理由にある。ギリギリプレイ可能だとは思うが、フレーム生成非対応ながら 60-120fps で動作する MHWorld と比較すると、不満を抱えたままのゲームプレイになってしまう気がした。  
1080p でも設定次第では VRAM 8GB がギリギリなゲームが今後増えていく可能性を考えると、VRAM 12GB か 16GB のモデルも食指が動く。  
